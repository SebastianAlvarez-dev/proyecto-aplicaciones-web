
<!DOCTYPE html>

<html lang="es">
<head>
<script>
  // Protecci√≥n total: bloquea acceso si no hay sesi√≥n iniciada
  (function(){
    var usuario = localStorage.getItem('becasULEAM_user');
    if(!usuario){
      window.location.replace('login.html');
    }
  })();
</script>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Registro de solicitud ¬∑ ULEAM</title>
<link href="css/estilos.css" rel="stylesheet"/>
<style>
.campos-beca {
  background: #f8f8f8;
  padding: 15px;
  border-radius: 8px;
  margin-top: 10px;
  opacity: 0;
  transition: opacity 0.4s ease;
}
.campos-beca.visible {
  opacity: 1;
}
</style></head>
<body>
<header>
<div class="container top">
<div class="brand">
<img alt="ULEAM" src="assets/uleam-placeholder.png"/>
<strong>ULEAM ¬∑ Becas y ayudas econ√≥micas</strong>
</div>
<nav>
<a href="index.html">Inicio</a>
<a href="becas.html">Becas</a>
<a href="registro.html">Registro</a>
<a href="ver-solicitudes.html">Mis solicitudes</a>
<a href="perfil.html">Perfil</a>
<a href="reporte-tecnico.html">Soporte</a>
<a href="login.html">Login</a>
</nav>
<div class="user-menu">
<span id="userNameHeader">Usuario ‚ñº</span>
<div class="user-dropdown">
<a class="btn light" href="perfil.html">üë§ Mi perfil</a>
<button class="btn secondary" id="logoutBtn">üîí Cerrar sesi√≥n</button>
</div>
</div>
</div>
</header>
<main class="container">
<h1>Solicitud de registro de beca</h1>
<p class="notice">Campos marcados con * son obligatorios.</p>
<form id="formRegistro" novalidate="">
<div class="form-row">
<label class="required" for="nombre">Nombres y Apellidos</label>
<input id="nombre" name="nombre" placeholder="Ej. Sebasti√°n Bravo" type="text"/>
</div>
<div class="form-row">
<label class="required" for="cedula">C√©dula</label>
<input id="cedula" inputmode="numeric" maxlength="10" name="cedula" placeholder="10 d√≠gitos" type="text"/>
</div>
<div class="form-row">
<label class="required" for="facultad">Facultad</label>
<select id="facultad" name="facultad">
<option value="">Seleccione...</option>
<option>Ciencias de la Vida y Tecnolog√≠as</option>
<option>Ciencias de la Salud</option>
<option>Ciencias Sociales y Derecho</option>
</select>
</div>
<div class="form-row">
<label class="required" for="carrera">Carrera</label>
<select id="carrera" name="carrera"><option value="">Seleccione...</option></select>
</div>
<div class="form-row" style="grid-column:1 / -1">
<label class="required" for="tipoBeca">Tipo de beca</label>
<select id="tipoBeca" name="tipoBeca">
<option value="">Seleccione...</option>
<option value="socioeconomica">Beca socioecon√≥mica</option>
<option value="discapacidad">Beca por discapacidad</option>
<option value="deportiva">Beca por alto rendimiento deportivo</option>
<option value="academica">Beca por alto rendimiento acad√©mico</option>
</select>
<div id="contenedorCamposBeca" style="margin-top:20px;">
<div class="campos-beca fade" id="camposBecaAcademica" style="display:none;">
<h3>Informaci√≥n adicional - Beca Acad√©mica</h3>
<label>Promedio general anterior *</label>
<input name="promedio" step="0.01" type="number"/>
<label>Facultad o carrera *</label>
<input name="facultad" type="text"/>
<label>Nivel de estudios *</label>
<select name="nivel_estudios">
<option value="">Seleccione...</option>
<option>Pregrado</option>
<option>Posgrado</option>
</select>
<label>Adjuntar certificado de notas *</label>
<input accept=".pdf,.jpg,.png" name="certificado_notas" type="file"/>
<label>Adjuntar c√©dula *</label>
<input accept=".pdf,.jpg,.png" name="cedula_academica" type="file"/>
</div>
<div class="campos-beca fade" id="camposBecaDeportiva" style="display:none;">
<h3>Informaci√≥n adicional - Beca Deportiva</h3>
<label>Disciplina deportiva *</label>
<input name="disciplina" type="text"/>
<label>Logros o m√©ritos deportivos *</label>
<textarea name="logros"></textarea>
<label>¬øRepresenta a la instituci√≥n? *</label>
<select name="representa">
<option value="">Seleccione...</option>
<option>S√≠</option>
<option>No</option>
</select>
<label>Adjuntar certificado deportivo *</label>
<input accept=".pdf,.jpg,.png" name="certificado_deportivo" type="file"/>
<label>Adjuntar carnet de deportista *</label>
<input accept=".pdf,.jpg,.png" name="carnet_deporte" type="file"/>
</div>
<div class="campos-beca fade" id="camposBecaEconomica" style="display:none;">
<h3>Informaci√≥n adicional - Beca Socioecon√≥mica</h3>
<label>Ingresos familiares mensuales *</label>
<input name="ingresos" step="0.01" type="number"/>
<label>N√∫mero de integrantes en el hogar *</label>
<input name="integrantes" type="number"/>
<label>Situaci√≥n socioecon√≥mica *</label>
<select name="situacion">
<option value="">Seleccione...</option>
<option>Bajo</option>
<option>Medio-bajo</option>
<option>Medio</option>
</select>
<label>Adjuntar copia de c√©dula *</label>
<input accept=".pdf,.jpg,.png" name="cedula_economica" type="file"/>
<label>Adjuntar comprobante de ingresos *</label>
<input accept=".pdf,.jpg,.png" name="comprobante_ingresos" type="file"/>
</div>
<div class="campos-beca fade" id="camposBecaDiscapacidad" style="display:none;">
<h3>Informaci√≥n adicional - Beca por Discapacidad</h3>
<label>Tipo de discapacidad *</label>
<input name="tipo_discapacidad" type="text"/>
<label>Porcentaje de discapacidad *</label>
<input name="porcentaje_discapacidad" step="1" type="number"/>
<label>Adjuntar carnet de discapacidad *</label>
<input accept=".pdf,.jpg,.png" name="carnet_discapacidad" type="file"/>
<label>Adjuntar certificado m√©dico *</label>
<input accept=".pdf,.jpg,.png" name="certificado_medico" type="file"/>
</div>
</div>


</div>
<section class="cond-block" id="block-socioeconomica">
<h3>Beca socioecon√≥mica</h3>
<div class="form-row"><label class="required">Ingreso mensual familiar</label>
<select name="ingresoMensual"><option value="">Seleccione...</option><option>0 a 200</option><option>200 a 400</option><option>400 a 600</option><option>600 a 800</option><option>800 o m√°s</option></select>
</div>
<div class="form-row"><label class="required">N√∫mero de integrantes del hogar</label><input min="1" name="integrantes" step="1" type="number"/></div>
<div class="form-row"><label class="required">Situaci√≥n laboral de padres/tutores</label>
<select name="situacionLaboral"><option value="">Seleccione...</option><option>Empleado</option><option>Desempleado</option><option>Trabajo informal</option></select>
</div>
<div class="form-row" style="grid-column:1 / -1"><label>Adjuntar foto de c√©dula</label><input accept="image/*,application/pdf" name="cedulaArchivo" type="file"/></div>
</section>
<section class="cond-block" id="block-discapacidad">
<h3>Beca por discapacidad</h3>
<div class="form-row"><label class="required">Tipo de discapacidad</label>
<select name="tipoDiscapacidad"><option value="">Seleccione...</option><option>F√≠sica</option><option>Visual</option><option>Auditiva</option><option>Intelectual</option><option>Psicosocial</option></select>
</div>
<div class="form-row"><label class="required">Porcentaje de discapacidad</label><input max="100" min="1" name="porcentajeDiscapacidad" type="number"/></div>
<div class="form-row" style="grid-column:1 / -1"><label>N√∫mero de carnet (CONADIS/MSP)</label><input name="carnet" type="text"/></div>
</section>
<section class="cond-block" id="block-deportiva">
<h3>Beca deportiva</h3>
<div class="form-row"><label class="required">Disciplina deportiva</label><input name="disciplina" type="text"/></div>
<div class="form-row"><label class="required">Nivel de competencia</label>
<select name="nivelCompetencia"><option value="">Seleccione...</option><option>Universitario</option><option>Provincial</option><option>Nacional</option><option>Internacional</option></select>
</div>
<div class="form-row" style="grid-column:1 / -1"><label>Adjuntar aval deportivo</label><input accept="image/*,application/pdf" name="avalDeportivo" type="file"/></div>
</section>
<section class="cond-block" id="block-academica">
<h3>Beca acad√©mica</h3>
<div class="form-row"><label class="required">Promedio general</label><input max="100" min="0" name="promedio" step="0.01" type="number"/></div>
<div class="form-row" style="grid-column:1 / -1"><label>Adjuntar r√©cord acad√©mico</label><input accept="image/*,application/pdf" name="recordAcademico" type="file"/></div>
</section>
<div class="form-row" style="grid-column:1 / -1"><label>Motivo de solicitud</label><textarea name="motivo"></textarea></div>
<div class="form-actions"><button class="btn" type="submit">Enviar solicitud</button><a class="btn secondary" href="ver-solicitudes.html">Ver mis solicitudes</a></div>
</form>
</main>
<footer>
<div class="container">
<div>¬© ULEAM ‚Äì Sistema de Becas (prototipo acad√©mico)</div>
<div><button class="btn light" onclick="logout()">Cerrar sesi√≥n</button></div>
</div>
</footer>
<script src="js/app.js"></script>
<script>
// Dependencia entre facultad y carreras (versi√≥n final conectada correctamente)
document.addEventListener("DOMContentLoaded", () => {
  const facultad = document.getElementById("facultad");
  const carrera = document.getElementById("carrera");
  if (!facultad || !carrera) return;

  const carrerasPorFacultad = {
    "Ciencias de la Vida y Tecnolog√≠as": [
      "Ingenier√≠a de Software",
      "Biolog√≠a",
      "Tecnolog√≠as de la Informaci√≥n"
    ],
    "Ciencias de la Salud": [
      "Enfermer√≠a",
      "Medicina",
      "Psicolog√≠a",
      "Fisioterapia"
    ],
    "Ciencias Sociales y Derecho": [
      "Derecho",
      "Criminal√≠stica"
    ]
  };

  facultad.addEventListener("change", e => {
    const seleccion = e.target.value;
    carrera.innerHTML = '<option value="">Seleccione...</option>';
    if (carrerasPorFacultad[seleccion]) {
      carrerasPorFacultad[seleccion].forEach(nombre => {
        const option = document.createElement("option");
        option.value = nombre;
        option.textContent = nombre;
        carrera.appendChild(option);
      });
    }
  });
});
</script>
<script>
document.addEventListener('DOMContentLoaded', function(){
  const selectTipo = document.getElementById('tipoBeca');
  const bloques = {
    academica: document.getElementById('camposBecaAcademica'),
    deportiva: document.getElementById('camposBecaDeportiva'),
    socioeconomica: document.getElementById('camposBecaEconomica'),
    discapacidad: document.getElementById('camposBecaDiscapacidad')
  };

  function mostrarCampos(){
    Object.values(bloques).forEach(div => {
      div.style.display = 'none';
      div.classList.remove('visible');
    });
    const tipo = selectTipo.value.toLowerCase();
    if(tipo.includes('academica')) mostrar(bloques.academica);
    else if(tipo.includes('deportiva')) mostrar(bloques.deportiva);
    else if(tipo.includes('socio')) mostrar(bloques.socioeconomica);
    else if(tipo.includes('discap')) mostrar(bloques.discapacidad);
  }

  function mostrar(div){
    div.style.display = 'block';
    setTimeout(() => div.classList.add('visible'), 10);
  }

  selectTipo.addEventListener('change', mostrarCampos);
});
</script>
<script>
document.addEventListener('DOMContentLoaded', function(){
  const form = document.getElementById('formRegistro');
  if(!form) return;

  form.addEventListener('submit', function(e){
    e.preventDefault();
    const tipo = document.getElementById('tipoBeca') ? document.getElementById('tipoBeca').value : 'Desconocido';
    const nombre = document.getElementById('nombre') ? document.getElementById('nombre').value : 'No especificado';
    const correo = document.getElementById('correo') ? document.getElementById('correo').value : 'No especificado';

    const nuevaSolicitud = {
      tipo: tipo,
      fecha: new Date().toLocaleDateString(),
      estado: 'Pendiente',
      nombre: nombre,
      correo: correo
    };

    let solicitudes = JSON.parse(localStorage.getItem('solicitudes')) || [];
    solicitudes.push(nuevaSolicitud);
    localStorage.setItem('solicitudes', JSON.stringify(solicitudes));

    alert('‚úÖ Solicitud registrada correctamente.');
    form.reset();
  });
});
</script>


<script>
document.addEventListener('DOMContentLoaded', function(){
  const form = document.getElementById('formRegistro') || document.querySelector('form');
  const tipoSel = document.getElementById('tipoBeca') || document.querySelector('select');
  if(!form || !tipoSel) return;

  form.addEventListener('submit', function(e){
    e.preventDefault();
    const user = JSON.parse(localStorage.getItem('becasULEAM_user') || 'null');
    const correo = user && user.correo ? user.correo : (document.getElementById('correo') ? document.getElementById('correo').value : 'anon@demo');

    const solicitud = {
      id: Date.now(),
      tipo: (tipoSel.value || 'Desconocida'),
      fecha: new Date().toLocaleDateString(),
      estado: 'Pendiente',
      correo: correo
    };

    let solicitudes = JSON.parse(localStorage.getItem('solicitudes') || '[]');
    solicitudes.push(solicitud);
    localStorage.setItem('solicitudes', JSON.stringify(solicitudes));

    alert('‚úÖ Solicitud registrada correctamente.');
    form.reset();
  });
});
</script>

</body>
</html>
